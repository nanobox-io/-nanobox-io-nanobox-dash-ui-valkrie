!function t(e,n,o){function r(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(t,e,n){var o,r,i=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=t("glob/updater"),e.exports=o=function(t){function e(t,n,o){this.getParentHostOfComponent=n,this.generationUpdater=o,e.__super__.constructor.call(this,t)}return i(e,t),e.prototype.updateComponents=function(t,e,n){var o,r,i,s,u,a,p,c,h,f,b;for(o=function(t){return function(e,n){return t.updateComponent(e.id,n,e)}}(this),f=this.getNonPairedItems(n,e,o),p=f[0],c=f[1],r=0,s=p.length;s>r;r++)a=p[r],this.getBox(t).addComponent(a);for(b=[],i=0,u=c.length;u>i;i++)h=c[i],b.push(this.getBox(t).removeComponent(h.id));return b},e.prototype.updateComponent=function(t,e,n){return this.generationUpdater.updateGenerations(t,e.generations,n.generations)},e}(r)},{"glob/updater":6}],2:[function(t,e,n){var o,r,i=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=t("glob/updater"),e.exports=o=function(t){function e(t){e.__super__.constructor.call(this,t)}return i(e,t),e}(r)},{"glob/updater":6}],3:[function(t,e,n){var o,r,i=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=t("glob/updater"),e.exports=o=function(t){function e(t,n){this.getParentHostOfComponent=n,e.__super__.constructor.call(this,t)}return i(e,t),e.prototype.updateGenerations=function(t,e,n){var o,r,i,s,u,a,p,c,h,f,b;for(o=function(t){return function(e,n){return t.updateGeneration(n,e)}}(this),f=this.getNonPairedItems(n,e,o),p=f[0],c=f[1],r=0,s=p.length;s>r;r++)a=p[r],this.getParentHostOfComponent(t).addGeneration(t,a);for(b=[],i=0,u=c.length;u>i;i++)h=c[i],b.push(this.getParentHostOfComponent(t).removeGeneration(h.id));return b},e.prototype.updateGeneration=function(t,e){return this.updateState(e.id,t.state,e.state)},e}(r)},{"glob/updater":6}],4:[function(t,e,n){var o,r,i,s,u,a=function(t,e){return function(){return t.apply(e,arguments)}};u=t("glob/host-updater"),r=t("glob/cluster-updater"),o=t("glob/app-component-updater"),i=t("glob/generation-updater"),e.exports=s=function(){function t(t){this.$el=t,this.getParentHostOfComponent=a(this.getParentHostOfComponent,this),this.getBox=a(this.getBox,this),this.hosts={},this.clusters={},this.boxes={},this.generationUpdater=new i(this.getBox,this.getParentHostOfComponent),this.appComponentUpdater=new o(this.getBox,this.getParentHostOfComponent,this.generationUpdater),this.hostUpdater=new u(this.getBox,this.appComponentUpdater),this.clusterUpdater=new r(this.getBox,this.appComponentUpdater),this.subscribeToRegistrations(),this.addEventListeners()}return t.prototype.update=function(t){var e,n,o,r,i,s,u,a,p,c,h,f,b,l,d,g;if(null!=t.hosts)for(b=t.hosts,s=0,c=b.length;c>s;s++)i=b[s],this.createOrUpdateHost(i);if(null!=t.clusters)for(l=t.clusters,u=0,h=l.length;h>u;u++)for(e=l[u],d=e.generations,a=0,f=d.length;f>a;a++)o=d[a],n={serviceId:e.id,serviceState:e.state,name:e.name,serviceType:e.serviceType,scalesHoriz:e.scalesHoriz,scalesRedund:e.scalesRedund,instances:e.instances,id:o.id,generationState:o.state,generationStatus:o.status,members:o.instances,totalMembers:o.instances.length},this.getOrCreateCluster(n);if(0===t.totalDeploys){g=this.hosts;for(p in g)return r=g[p],void r.entity.box.showAsReadyForDeploys()}},t.prototype.createOrUpdateHost=function(t){var e,n;return null==this.hosts[t.id]?(e=new nanobox.ClobberBox,e.build(this.$el,nanobox.ClobberBox.HOST,t)):(n=this.hosts[t.id],e=n.entity,this.hostUpdater.update(n.entity,n.data,t)),this.hosts[t.id]={data:t,entity:e}},t.prototype.getOrCreateCluster=function(t){var e,n;return null==this.clusters[t.id]?(n=new nanobox.ClobberBox,n.build(this.$el,nanobox.ClobberBox.CLUSTER,t)):(e=this.clusters[t.id],n=e.entity),this.clusters[t.id]={data:t,entity:n}},t.prototype.subscribeToRegistrations=function(){return PubSub.subscribe("REGISTER",function(t){return function(e,n){return t.addBox(n)}}(this)),PubSub.subscribe("UNREGISTER",function(t){return function(e,n){return t.removeBox(n)}}(this))},t.prototype.addEventListeners=function(){return PubSub.subscribe("SHOW.APP_COMPONENTS",function(t){return function(e,n){return t.getBox(n.id).switchSubContent("app-components",n.el)}}(this)),PubSub.subscribe("SHOW.PLATFORM_COMPONENTS",function(t){return function(e,n){return t.getBox(n.id).switchSubContent("platform-components",n.el)}}(this)),PubSub.subscribe("SHOW.INSTANCES",function(t){return function(t,e){}}(this)),PubSub.subscribe("SHOW.SCALE",function(t){return function(e,n){return t.getBox(n.id).switchSubContent("scale-machine",n.el)}}(this)),PubSub.subscribe("SHOW.STATS",function(t){return function(e,n){return t.getBox(n.id).switchSubContent("stats",n.el)}}(this)),PubSub.subscribe("SHOW.CONSOLE",function(t){return function(e,n){return t.getBox(n.id).switchSubContent("console",n.el)}}(this)),PubSub.subscribe("SHOW.SPLIT",function(t){return function(e,n){return t.getBox(n.id).switchSubContent("split",n.el)}}(this)),PubSub.subscribe("SHOW.ADMIN",function(t){return function(e,n){return t.getBox(n.id).switchSubContent("admin",n.el)}}(this)),PubSub.subscribe("SHOW.HOST-INTANCES",function(t){return function(e,n){return t.getBox(n.id).switchSubContent("host-instances",n.el)}}(this))},t.prototype.getBox=function(t){return this.boxes[t]},t.prototype.getParentHostOfComponent=function(t){var e,n,o;o=this.boxes;for(n in o)if(e=o[n],e.hasComponentWithId(t))return e},t.prototype.addBox=function(t){return this.boxes[t.id]=t},t.prototype.removeBox=function(t){return delete this.boxes[t.id]},t}()},{"glob/app-component-updater":1,"glob/cluster-updater":2,"glob/generation-updater":3,"glob/host-updater":5}],5:[function(t,e,n){var o,r,i=function(t,e){function n(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=t("glob/updater"),e.exports=o=function(t){function e(t,n){this.appComponentUpdater=n,e.__super__.constructor.call(this,t)}return i(e,t),e.prototype.update=function(t,e,n){return this.updateState(n.id,e.state,n.state),this.appComponentUpdater.updateComponents(n.id,e.appComponents,n.appComponents),t.data=n,t.box.data=n},e}(r)},{"glob/updater":6}],6:[function(t,e,n){var o;e.exports=o=function(){function t(t){this.getBox=t}return t.prototype.updateState=function(t,e,n){var o;return e!==n&&null!=(o=this.getBox(t))?o.setState(n):void 0},t.prototype.getNonPairedItems=function(t,e,n){var o,r,i,s,u,a,p,c,h,f,b,l,d;for(b=[],l=[],o=0,u=t.length;u>o;o++){for(f=t[o],h=!1,r=0,a=e.length;a>r;r++)d=e[r],f.id===d.id&&(h=!0,n(f,d));h||b.push(f)}for(i=0,p=e.length;p>i;i++){for(d=e[i],h=!1,s=0,c=t.length;c>s;s++)f=t[s],f.id===d.id&&(h=!0);h||l.push(d)}return[b,l]},t}()},{}],7:[function(t,e,n){var o,r,i;r=t("stats/stats-machine"),o=t("glob/glob-machine"),i=function(){function t(t,e){this.$el=t,this.params=e,this.registerForPubSubCalls(),this.globMachine=new o(this.$el)}return t.prototype.update=function(){return $.ajax({url:this.params.updateUrl,type:"GET",contentType:"application/json;charset=utf-8",error:function(t){return function(t,e){return console.log("error fetching data : "+e)}}(this),success:function(t){return function(e){return t.refresh(e)}}(this)})},t.prototype.refresh=function(t){return this.globMachine.update(t)},t.prototype.registerForPubSubCalls=function(){return PubSub.subscribe("SPLIT.SAVE",function(t){return function(e,n){return t.params.callbacks.onSplitService(n)}}(this)),PubSub.subscribe("SCALE.SAVE",function(t){return function(e,n){return t.params.callbacks.onScaleHost(n)}}(this)),PubSub.subscribe("SCALE.GET_OPTIONS",function(t){return function(e,n){return n(t.params.scaleOptions)}}(this))},t}(),window.nanobox||(window.nanobox={}),nanobox.Valkrie=i},{"glob/glob-machine":4,"stats/stats-machine":8}],8:[function(t,e,n){var o;e.exports=o=function(){function t(){}return t.prototype.addSubsciber=function(t){},t.prototype.removeSubsciber=function(t){},t}()},{}]},{},[7]);