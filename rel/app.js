!function t(n,e,o){function r(u,s){if(!e[u]){if(!n[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var c=e[u]={exports:{}};n[u][0].call(c.exports,function(t){var e=n[u][1][t];return r(e?e:t)},c,c.exports,t,n,e,o)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(t,n,e){var o,r,i=function(t,n){function e(){this.constructor=t}for(var o in n)u.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},u={}.hasOwnProperty;r=t("glob/updater"),n.exports=o=function(t){function n(t,e,o){this.getParentHostOfComponent=e,this.generationUpdater=o,n.__super__.constructor.call(this,t)}return i(n,t),n.prototype.updateComponents=function(t,n,e){var o,r,i,u,s,a,p,c,h,f,b;for(o=function(t){return function(n,e){return t.updateComponent(n.id,e,n)}}(this),f=this.getNonPairedItems(e,n,o),p=f[0],c=f[1],r=0,u=p.length;u>r;r++)a=p[r],this.getBox(t).addComponent(a);for(b=[],i=0,s=c.length;s>i;i++)h=c[i],b.push(this.getBox(t).removeComponent(h.id));return b},n.prototype.updateComponent=function(t,n,e){return this.generationUpdater.updateGenerations(t,n.generations,e.generations)},n}(r)},{"glob/updater":6}],2:[function(t,n,e){var o,r,i=function(t,n){function e(){this.constructor=t}for(var o in n)u.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},u={}.hasOwnProperty;r=t("glob/updater"),n.exports=o=function(t){function n(t){n.__super__.constructor.call(this,t)}return i(n,t),n}(r)},{"glob/updater":6}],3:[function(t,n,e){var o,r,i=function(t,n){function e(){this.constructor=t}for(var o in n)u.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},u={}.hasOwnProperty;r=t("glob/updater"),n.exports=o=function(t){function n(t,e){this.getParentHostOfComponent=e,n.__super__.constructor.call(this,t)}return i(n,t),n.prototype.updateGenerations=function(t,n,e){var o,r,i,u,s,a,p,c,h,f,b;for(o=function(t){return function(n,e){return t.updateGeneration(e,n)}}(this),f=this.getNonPairedItems(e,n,o),p=f[0],c=f[1],r=0,u=p.length;u>r;r++)a=p[r],this.getParentHostOfComponent(t).addGeneration(t,a);for(b=[],i=0,s=c.length;s>i;i++)h=c[i],b.push(this.getParentHostOfComponent(t).removeGeneration(h.id));return b},n.prototype.updateGeneration=function(t,n){return this.updateState(n.id,t.state,n.state)},n}(r)},{"glob/updater":6}],4:[function(t,n,e){var o,r,i,u,s,a=function(t,n){return function(){return t.apply(n,arguments)}};s=t("glob/host-updater"),r=t("glob/cluster-updater"),o=t("glob/app-component-updater"),i=t("glob/generation-updater"),n.exports=u=function(){function t(t){this.$el=t,this.getParentHostOfComponent=a(this.getParentHostOfComponent,this),this.getBox=a(this.getBox,this),this.hosts={},this.clusters={},this.boxes={},this.generationUpdater=new i(this.getBox,this.getParentHostOfComponent),this.appComponentUpdater=new o(this.getBox,this.getParentHostOfComponent,this.generationUpdater),this.hostUpdater=new s(this.getBox,this.appComponentUpdater),this.clusterUpdater=new r(this.getBox,this.appComponentUpdater),this.subscribeToRegistrations(),this.addEventListeners()}return t.prototype.update=function(t){var n,e,o,r,i,u,s,a,p,c,h;if(null!=t.hosts)for(p=t.hosts,i=0,s=p.length;s>i;i++)r=p[i],this.createOrUpdateHost(r);if(null!=t.clusters){for(c=t.clusters,h=[],u=0,a=c.length;a>u;u++)n=c[u],h.push(function(){var t,r,i,u;for(i=n.generations,u=[],t=0,r=i.length;r>t;t++)o=i[t],e={serviceId:n.id,serviceState:n.state,name:n.name,serviceType:n.serviceType,scalesHoriz:n.scalesHoriz,scalesRedund:n.scalesRedund,instances:n.instances,id:o.id,generationState:o.state,generationStatus:o.status,members:o.instances,totalMembers:o.instances.length},u.push(this.getOrCreateCluster(e));return u}.call(this));return h}},t.prototype.createOrUpdateHost=function(t){var n,e;return null==this.hosts[t.id]?(n=new nanobox.ClobberBox,n.build(this.$el,nanobox.ClobberBox.HOST,t)):(e=this.hosts[t.id],n=e.entity,this.hostUpdater.update(e.entity,e.data,t)),this.hosts[t.id]={data:t,entity:n}},t.prototype.getOrCreateCluster=function(t){var n,e;return null==this.clusters[t.id]?(e=new nanobox.ClobberBox,e.build(this.$el,nanobox.ClobberBox.CLUSTER,t)):(n=this.clusters[t.id],e=n.entity),this.clusters[t.id]={data:t,entity:e}},t.prototype.subscribeToRegistrations=function(){return PubSub.subscribe("REGISTER",function(t){return function(n,e){return t.addBox(e)}}(this)),PubSub.subscribe("UNREGISTER",function(t){return function(n,e){return t.removeBox(e)}}(this))},t.prototype.addEventListeners=function(){return PubSub.subscribe("SHOW.APP_COMPONENTS",function(t){return function(n,e){return t.getBox(e.id).switchSubContent("app-components",e.el)}}(this)),PubSub.subscribe("SHOW.PLATFORM_COMPONENTS",function(t){return function(n,e){return t.getBox(e.id).switchSubContent("platform-components",e.el)}}(this)),PubSub.subscribe("SHOW.INSTANCES",function(t){return function(t,n){}}(this)),PubSub.subscribe("SHOW.SCALE",function(t){return function(n,e){return t.getBox(e.id).switchSubContent("scale-machine",e.el)}}(this)),PubSub.subscribe("SHOW.STATS",function(t){return function(n,e){return t.getBox(e.id).switchSubContent("stats",e.el)}}(this)),PubSub.subscribe("SHOW.CONSOLE",function(t){return function(n,e){return t.getBox(e.id).switchSubContent("console",e.el)}}(this)),PubSub.subscribe("SHOW.SPLIT",function(t){return function(n,e){return t.getBox(e.id).switchSubContent("split",e.el)}}(this)),PubSub.subscribe("SHOW.ADMIN",function(t){return function(n,e){return t.getBox(e.id).switchSubContent("admin",e.el)}}(this)),PubSub.subscribe("SHOW.HOST-INTANCES",function(t){return function(n,e){return t.getBox(e.id).switchSubContent("host-instances",e.el)}}(this))},t.prototype.getBox=function(t){return this.boxes[t]},t.prototype.getParentHostOfComponent=function(t){var n,e,o;o=this.boxes;for(e in o)if(n=o[e],n.hasComponentWithId(t))return n},t.prototype.addBox=function(t){return this.boxes[t.id]=t},t.prototype.removeBox=function(t){return delete this.boxes[t.id]},t}()},{"glob/app-component-updater":1,"glob/cluster-updater":2,"glob/generation-updater":3,"glob/host-updater":5}],5:[function(t,n,e){var o,r,i=function(t,n){function e(){this.constructor=t}for(var o in n)u.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},u={}.hasOwnProperty;r=t("glob/updater"),n.exports=o=function(t){function n(t,e){this.appComponentUpdater=e,n.__super__.constructor.call(this,t)}return i(n,t),n.prototype.update=function(t,n,e){return this.updateState(e.id,n.state,e.state),this.appComponentUpdater.updateComponents(e.id,n.appComponents,e.appComponents),t.data=e,t.box.data=e},n}(r)},{"glob/updater":6}],6:[function(t,n,e){var o;n.exports=o=function(){function t(t){this.getBox=t}return t.prototype.updateState=function(t,n,e){var o;return n!==e&&null!=(o=this.getBox(t))?o.setState(e):void 0},t.prototype.getNonPairedItems=function(t,n,e){var o,r,i,u,s,a,p,c,h,f,b,l,d;for(b=[],l=[],o=0,s=t.length;s>o;o++){for(f=t[o],h=!1,r=0,a=n.length;a>r;r++)d=n[r],f.id===d.id&&(h=!0,e(f,d));h||b.push(f)}for(i=0,p=n.length;p>i;i++){for(d=n[i],h=!1,u=0,c=t.length;c>u;u++)f=t[u],f.id===d.id&&(h=!0);h||l.push(d)}return[b,l]},t}()},{}],7:[function(t,n,e){var o,r,i;r=t("stats/stats-machine"),o=t("glob/glob-machine"),i=function(){function t(t,n){this.$el=t,this.params=n,this.registerForPubSubCalls(),this.globMachine=new o(this.$el)}return t.prototype.update=function(){return $.ajax({url:this.params.updateUrl,type:"GET",contentType:"application/json;charset=utf-8",error:function(t){return function(t,n){return console.log("error fetching data : "+n)}}(this),success:function(t){return function(n){return t.refresh(n)}}(this)})},t.prototype.refresh=function(t){return this.globMachine.update(t)},t.prototype.registerForPubSubCalls=function(){return PubSub.subscribe("SPLIT.SAVE",function(t){return function(n,e){return t.params.callbacks.onSplitService(e)}}(this)),PubSub.subscribe("SCALE.SAVE",function(t){return function(n,e){return t.params.callbacks.onScaleHost(e)}}(this)),PubSub.subscribe("SCALE.GET_OPTIONS",function(t){return function(n,e){return e(t.params.scaleOptions)}}(this))},t}(),window.nanobox||(window.nanobox={}),nanobox.Valkrie=i},{"glob/glob-machine":4,"stats/stats-machine":8}],8:[function(t,n,e){var o;n.exports=o=function(){function t(){}return t.prototype.addSubsciber=function(t){},t.prototype.removeSubsciber=function(t){},t}()},{}]},{},[7]);